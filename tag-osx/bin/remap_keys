#!/bin/bash

# Swap `/~ and §/± keys; Change Caps Lock to Control
if [[ $1 != "-r" ]]; then
  hidutil property --set '{"UserKeyMapping": [
    { "HIDKeyboardModifierMappingSrc":0x700000064,
      "HIDKeyboardModifierMappingDst":0x700000035 },
    { "HIDKeyboardModifierMappingSrc":0x700000035,
      "HIDKeyboardModifierMappingDst":0x700000064 },
    { "HIDKeyboardModifierMappingSrc":0x700000039,
      "HIDKeyboardModifierMappingDst":0x7000000e0 }
  ]}'
else
  hidutil property --set '{"UserKeyMapping": [
    { "HIDKeyboardModifierMappingSrc":0x700000039,
      "HIDKeyboardModifierMappingDst":0x7000000e0 }
  ]}'
fi
